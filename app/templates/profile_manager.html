<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
</head>
<body>
    <form action="{{ url_for('profile_manager_bp.profile_manager') }}" method="POST">
        
        {{ form.csrf_token }}
        
        {{ form.name.label }}
        {{ form.name(value=current_user.profile.name) }}
        {% if form.name.errors %}
            <ul class="errors">
            {% for error in form.name.errors %}
                <li>{{ error }}</li>{% endfor %}
            </ul>
        {% endif %}
        <br>
        
        {{ form.gender.label }}
        {% for value, label in form.gender.choices %}
            <label>
                <input type="radio" name="gender" value="{{ value }}" {{ "checked" if current_user.profile.gender == value }}>
                {{ label }}
            </label>
        {% endfor %}
        
        {% if form.gender.errors %}
            <ul class="errors">
                {% for error in form.gender.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}
        <br>

        {{ form.description.label }}
        {{ form.description() }}
        {% if form.description.errors %}
            <ul class="errors">
            {% for error in form.description.errors %}
                <li>{{ error }}</li>{% endfor %}
            </ul>
        {% endif %}
        <br>

        {% if form.gender_preferences.errors %}
            {% for error in form.gender_preferences.errors %}
                <span>{{ error }}</span>
            {% endfor %}
        {% endif %}
        {% for value, label in form.gender_preferences.choices %}
            <input type="checkbox" name="gender_preferences" value="{{ value }}" {{ "checked" if value in current_user.matching_preferences.gender_preferences}}>
            {{ label }}
        {% endfor %}

        <br>
        


        <br>

        <label>Age preferences:</label>  
            <br>    
            {{ form.lower_difference.label }}
            {{ form.lower_difference(value=current_user.matching_preferences.lower_difference) }}
            {% if form.lower_difference.errors %}
                <ul class="errors">
                {% for error in form.lower_difference.errors %}
                    <li>{{ error }}</li>{% endfor %}
                </ul>
            {% endif %}
            <br>

            {{ form.upper_difference.label }}
            {{ form.upper_difference(value=current_user.matching_preferences.upper_difference) }}
            {% if form.upper_difference.errors %}
                <ul class="errors">
                {% for error in form.upper_difference.errors %}
                    <li>{{ error }}</li>{% endfor %}
                </ul>
            {% endif %}
            <br>
        <br>

        {{ form.submit() }}

    </form>
</body>
</html>